{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/actions.js","components/Notificaion.js","App.js","index.js"],"names":["Filter","filter","handleFilterChange","htmlFor","value","onChange","id","PersonForm","addPerson","name","number","onSubmit","newName","autoComplete","newNumber","type","Persons","persons","removePerson","map","person","key","className","onClick","toLowerCase","includes","baseUrl","axios","get","then","response","data","newObject","post","delete","personObject","put","Notification","message","success","notificationMessage","background","width","fontSize","borderStyle","borderRadius","padding","marginBottom","color","style","App","useState","setPersons","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","setSuccess","useEffect","phonebookService","event","target","preventDefault","some","e","window","alert","confirm","existingPerson","p","setTimeout","catch","error","returnedData","concat","personToRemove","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.727ae548.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n\r\n  return (\r\n    <div>\r\n      <h3>Filter phonebook</h3>\r\n      <label htmlFor=\"filter\">Filter names: </label>\r\n      <input\r\n        value={filter}\r\n        onChange={handleFilterChange}\r\n        id=\"filter\"\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ addPerson, name, number }) => {\r\n\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        <label htmlFor=\"name\">Name: </label>\r\n        <input\r\n          value={name.newName}\r\n          onChange={name.onChange}\r\n          id=\"name\"\r\n          autoComplete=\"off\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <label htmlFor=\"number\">Number: </label>\r\n        <input\r\n          value={number.newNumber}\r\n          onChange={number.onChange}\r\n          id=\"number\"\r\n          autoComplete=\"off\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({ persons, filter, removePerson }) => {\r\n\r\n  const rows = () => persons.map(person =>\r\n    <div key={person.id}> {person.name} {person.number}\r\n      <button className=\"delete-button\" onClick={() => removePerson(person)}>delete</button>\r\n    </div>)\r\n\r\n  const numbersToShow = () => {\r\n    if (filter === '') {\r\n      return (rows())\r\n    } else {\r\n      return (\r\n        persons\r\n          .filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\r\n          .map(person =>\r\n            <div key={person.id}> {person.name} {person.number}\r\n              <button className=\"dd\" onClick={() => removePerson(person)}>delete</button>\r\n            </div>)\r\n        //above .map method on the filter duplicates rows() method..\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {numbersToShow()}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons","import axios from 'axios';\r\n\r\n//use 'http://localhost:3001/persons' for local; else use '/api/persons' \r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request\r\n}\r\n\r\nconst update = (id, personObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, personObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, remove, update };","import React from 'react';\r\n\r\nconst Notification = ({ message, success }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    const notificationMessage = {\r\n        background: 'lightgrey',\r\n        width: '50%',\r\n        fontSize: 17,\r\n        borderStyle: 'solid',\r\n        borderRadius: 5,\r\n        padding: 5,\r\n        marginBottom: 10,\r\n        color: success ? 'green' : 'red'\r\n    }\r\n\r\n    return (\r\n        <div style={notificationMessage}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport phonebookService from './services/actions'\r\nimport Notification from './components/Notificaion'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filter, setFilter] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [success, setSuccess] = useState(true)\r\n\r\n  useEffect(() => {\r\n    phonebookService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response)\r\n      })\r\n  }, []) //second parameter of useEffect is [] to only run the effect along with first render of component\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    if (persons.some(e => e.name.toLowerCase() === newName.toLowerCase() && e.number === newNumber)) {\r\n      window.alert(`${newName} is already added to the phonebook`)\r\n      return 0\r\n    }\r\n\r\n    //check person exists in phonebook; search keys among persons for match; return Boolean\r\n    if (persons.some(e => e.name.toLowerCase() === newName.toLowerCase()) && newNumber !== null) {\r\n      if (window.confirm(`Update the number for ${newName}?`)) {\r\n        let existingPerson = persons.filter(p => p.name.toLowerCase() === newName.toLowerCase())\r\n        phonebookService\r\n          .update(existingPerson[0].id, personObject)\r\n          .then(response => {\r\n            setPersons(persons.map(person => person.id !== existingPerson[0].id ? person : response))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            //5 sec notification message\r\n            setErrorMessage(`Updated record for ${newName}`)\r\n            setSuccess(true)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n          })\r\n          .catch(error => {\r\n            setErrorMessage(`Cannot update: ${newName} has already been removed from the server`)\r\n            setSuccess(false)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n    } else { //create new phonebook entry\r\n      phonebookService\r\n        .create(personObject)\r\n        .then(returnedData => {\r\n          setPersons(persons.concat(returnedData))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setErrorMessage(`Added ${newName} to the phonebook`)\r\n          setSuccess(true)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n  }\r\n\r\n  const removePerson = (personToRemove) => {\r\n    if (window.confirm(`Delete ${personToRemove.name} from the phonebook?`)) {\r\n      phonebookService\r\n        .remove(personToRemove.id)\r\n        .then(\r\n          setPersons(persons.filter(persons => persons.id !== personToRemove.id)),\r\n        )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Notification message={errorMessage} success={success} />\r\n\r\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\r\n\r\n      <h3>Add new entry</h3>\r\n\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        name={{ newName: newName, onChange: handleNameChange }}\r\n        number={{ newNumber: newNumber, onChange: handleNumberChange }}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n\r\n      <Persons\r\n        persons={persons}\r\n        removePerson={removePerson}\r\n        filter={filter}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}